<template>
   <div style="height: 500px; background-color: #fffefc; border: 1px solid #ccc; border-radius: 10px; overflow: hidden;">
       <div class="slds-chat-bookend">
            <span class="slds-icon_container slds-icon-utility-chat slds-chat-icon"></span>
            <p>Chat started by <b>{senderName}</b> â€¢ {chatInitiatedTime}</p>
        </div>
    <div style="padding: 10px; overflow-y: auto; height: calc(100% - 60px);">
        
        <template if:true={showSpinner}>
            <div class="exampleHolder">
                <lightning-spinner alternative-text="Loading" size="large"></lightning-spinner>
            </div>
        </template>
        <template for:each={chatMessages} for:item="message">
            <section key={message.id} role="log" class="slds-chat">
                <ul class="slds-chat-list">
                    <template lwc:if={message.isInbound}>
                        <li key={message.id} class='slds-chat-listitem slds-chat-listitem_inbound'>
                            <div class="slds-chat-message">
                                <div class="slds-chat-message__body">
                                    <div class='slds-chat-message__text slds-chat-message__text_inbound'>
                                        <span>
                                            <lightning-formatted-rich-text value= {message.text} >
                                               
                                            </lightning-formatted-rich-text>
                                        </span>
                                    </div>
                                </div>
                            </div>
                        </li>
                    </template>
                    <template if:false={message.isInbound}>
                        <li key={message.id} class='slds-chat-listitem slds-chat-listitem_outbound'>
                            <div class="slds-chat-message">
                                <div class="slds-chat-message__body">
                                    <div class='slds-chat-message__text slds-chat-message__text_outbound'>
                                         <span>
                                            <lightning-formatted-rich-text value= {message.text} >
                                               
                                            </lightning-formatted-rich-text>
                                        </span>
                                    </div>
                                </div>
                            </div>
                        </li>
                    </template>
                </ul>
            </section>
        </template>
    </div>
</div>
<div class="chat-input-container">
    <div class="input-container">
        <lightning-textarea label="Reply" value={messageContext} placeholder="Type your reply here..." onchange={handleMessageChange}></lightning-textarea>
    </div>
    <div class="button-container" style="margin-top: 2%;">
            <lightning-icon icon-name='action:reset_password' alternative-text='read_receipts' size='small' title='read_receipts' onclick={refreshChat}></lightning-icon>
            <lightning-icon icon-name='action:share_post' alternative-text='reply_text' size='small' title='reply_text' onclick={handleSendReply}></lightning-icon>
        
    </div>
</div>
</template>